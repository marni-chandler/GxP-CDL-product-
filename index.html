<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CDL V2: Strategic Roadmap & Stakeholder Synthesis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap');
        
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f0f4f8;
        }

        /* --- CHART CONTAINER STYLING (MANDATORY) --- */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px; /* Constrain width */
            margin-left: auto;
            margin-right: auto;
            height: 350px;    /* Base height */
            max-height: 400px;
            /* Prevent overflow */
            overflow: hidden; 
        }

        /* Responsive height adjustment */
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }

        .card-hover:hover {
            transform: translateY(-4px);
            transition: all 0.3s ease;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
    <!-- Chosen Palette: Vibrant Tech (Deep Indigo & Bright Accents) -->
    <!-- Application Structure Plan: 
         1. Header: Project Title & Objective.
         2. Executive Summary: High-level metrics (simulated from worksheet context).
         3. Stakeholder Landscape: Who is asking for what (Bar Chart).
         4. Prioritization Synthesis: MoSCoW & Roadmap P-Level breakdown (Doughnut & Horizontal Bar).
         5. The Strategic Matrix: Value vs. Feasibility Scatter Plot (Synthesizing the Trade-off Log).
         6. Conflict Resolution: Visual comparison of opposing needs.
         7. Engineering Readiness: Interactive Checklist.
         Rationale: This structure moves from the "Who" and "What" to the strategic "How", culminating in technical readiness. -->
    <!-- Visualization & Content Choices:
         1. Stakeholder Requests -> Compare -> Bar Chart -> Shows which dept is driving scope.
         2. Roadmap Priorities -> Inform -> Doughnut Chart -> Visualizes the P0/P1/P2 balance.
         3. Value/Feasibility -> Relationships -> Scatter Plot -> visualizes the "Matrix" section of the worksheet.
         4. Conflicts -> Organize -> Comparison Cards -> Layouts text-based conflict clearly.
         CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="text-slate-800">

    <!-- Header Section -->
    <header class="bg-indigo-900 text-white py-12 px-4 shadow-xl border-b-4 border-cyan-400">
        <div class="max-w-6xl mx-auto text-center">
            <h1 class="text-4xl md:text-6xl font-black mb-4 tracking-tight">CDL V2 <span class="text-cyan-400">Roadmap Synthesis</span></h1>
            <p class="text-xl md:text-2xl text-indigo-200 max-w-3xl mx-auto font-light">
                Consolidated requirements for the Validated Clinical Data Lake (Phase II).
                <br>
                <span class="text-sm font-bold bg-indigo-800 px-3 py-1 rounded-full mt-2 inline-block text-cyan-300">Target: H2 2026</span>
            </p>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 py-12 space-y-16">

        <!-- SECTION 1: Strategic Context (Intro) -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center bg-white rounded-2xl shadow-lg p-8 card-hover border-l-8 border-indigo-600">
            <div>
                <h2 class="text-3xl font-bold text-indigo-900 mb-4">Objective: From Sandbox to GxP</h2>
                <p class="text-slate-600 leading-relaxed text-lg mb-6">
                    We have consolidated input from <strong>Clinical Ops, Data Science, Quality, and Regulatory</strong>. 
                    The primary objective for Phase 2 is to operationalize a 21 CFR Part 11 compliant environment. 
                    The focus has shifted from "exploration" (Phase 1) to "validation and automation" to support the new Biomarker and CMC pipelines.
                </p>
                <div class="flex space-x-4">
                    <div class="px-4 py-2 bg-indigo-50 rounded-lg border border-indigo-100">
                        <span class="block text-2xl font-bold text-indigo-600">4</span>
                        <span class="text-xs text-indigo-400 uppercase font-bold">Key Depts</span>
                    </div>
                    <div class="px-4 py-2 bg-cyan-50 rounded-lg border border-cyan-100">
                        <span class="block text-2xl font-bold text-cyan-600">P0</span>
                        <span class="text-xs text-cyan-500 uppercase font-bold">Top Priority</span>
                    </div>
                </div>
            </div>
            <div class="bg-indigo-900 rounded-xl p-6 text-white shadow-inner">
                <h3 class="text-lg font-bold text-cyan-400 mb-4 border-b border-indigo-700 pb-2">Top Jobs to be Done (JTBD)</h3>
                <ul class="space-y-4">
                    <li class="flex items-start">
                        <span class="text-2xl mr-3">üöÄ</span>
                        <div>
                            <strong class="text-indigo-200">Ingest:</strong>
                            <span class="text-sm block text-indigo-300">Automate vendor ingestion to save 10 hrs/wk of manual Excel work.</span>
                        </div>
                    </li>
                    <li class="flex items-start">
                        <span class="text-2xl mr-3">üõ°Ô∏è</span>
                        <div>
                            <strong class="text-indigo-200">Comply:</strong>
                            <span class="text-sm block text-indigo-300">Generate Audit Trails for all transformations to pass FDA Audit.</span>
                        </div>
                    </li>
                </ul>
            </div>
        </section>

        <!-- SECTION 2: Prioritization Landscape -->
        <section>
            <div class="mb-8 text-center max-w-3xl mx-auto">
                <h2 class="text-3xl font-bold text-indigo-900">Roadmap Synthesis</h2>
                <p class="text-slate-600 mt-2">
                    Analyzing the <strong>Roadmap Synthesis Table</strong>, we see a heavy weighting towards "Must Have" features driven by Regulatory requirements. 
                    Below shows the breakdown of feature requests by Priority Level and Stakeholder origin.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- CHART 1: Priority Distribution -->
                <div class="bg-white p-6 rounded-xl shadow-md border-t-4 border-pink-500 card-hover">
                    <h3 class="text-xl font-bold text-slate-800 mb-2">Priority Breakdown (P0-P2)</h3>
                    <p class="text-sm text-slate-500 mb-6">Distribution of features based on the Synthesis Matrix.</p>
                    <div class="chart-container">
                        <canvas id="priorityChart"></canvas>
                    </div>
                </div>

                <!-- CHART 2: Stakeholder Share -->
                <div class="bg-white p-6 rounded-xl shadow-md border-t-4 border-cyan-500 card-hover">
                    <h3 class="text-xl font-bold text-slate-800 mb-2">Request Volume by Dept</h3>
                    <p class="text-sm text-slate-500 mb-6">Which stakeholders are driving the scope?</p>
                    <div class="chart-container">
                        <canvas id="stakeholderChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 3: The Trade-off Matrix -->
        <section class="bg-white rounded-2xl shadow-lg p-8 border-t-8 border-indigo-900">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-1">
                    <h2 class="text-3xl font-bold text-indigo-900 mb-4">Value vs. Feasibility</h2>
                    <p class="text-slate-600 mb-6">
                        We mapped the items from the <strong>Roadmap Synthesis Table</strong> onto a strategic matrix.
                    </p>
                    <div class="space-y-4">
                        <div class="p-4 bg-green-50 rounded-lg border-l-4 border-green-500">
                            <h4 class="font-bold text-green-800">Quick Wins (Q1)</h4>
                            <p class="text-sm text-green-700">High Value, High Feasibility. E.g., SQL Workbench.</p>
                        </div>
                        <div class="p-4 bg-orange-50 rounded-lg border-l-4 border-orange-500">
                            <h4 class="font-bold text-orange-800">Big Bets (Q2)</h4>
                            <p class="text-sm text-orange-700">High Value, Low Feasibility. E.g., Audit Trails & 21 CFR Compliance.</p>
                        </div>
                    </div>
                </div>
                <div class="lg:col-span-2">
                    <div class="chart-container" style="max-width: 100%;">
                        <canvas id="matrixChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 4: Conflict Resolution -->
        <section>
            <h2 class="text-3xl font-bold text-indigo-900 mb-8 text-center">Conflict & Trade-off Log</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Conflict 1 -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden flex flex-col">
                    <div class="bg-red-50 p-4 border-b border-red-100 flex items-center">
                        <span class="text-2xl mr-3">‚öîÔ∏è</span>
                        <h3 class="font-bold text-red-800">Access Control Model</h3>
                    </div>
                    <div class="p-6 flex-1">
                        <div class="flex justify-between items-center mb-4 text-sm">
                            <span class="font-bold text-slate-500">Data Science wants:</span>
                            <span class="bg-slate-100 px-2 py-1 rounded text-slate-700">Open Access</span>
                        </div>
                        <div class="flex justify-between items-center mb-6 text-sm">
                            <span class="font-bold text-slate-500">Quality wants:</span>
                            <span class="bg-slate-100 px-2 py-1 rounded text-slate-700">Strict Lockdown</span>
                        </div>
                        <div class="bg-indigo-50 p-4 rounded-lg border border-indigo-100">
                            <h4 class="text-xs font-bold text-indigo-400 uppercase mb-1">Proposed Resolution</h4>
                            <p class="text-indigo-900 font-medium text-sm">Implement Role-Based Access Control (RBAC) with specific "Sandbox" zones for DS that are logically separated from "GxP Production" data.</p>
                        </div>
                    </div>
                </div>

                <!-- Conflict 2 -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden flex flex-col">
                    <div class="bg-red-50 p-4 border-b border-red-100 flex items-center">
                        <span class="text-2xl mr-3">‚öîÔ∏è</span>
                        <h3 class="font-bold text-red-800">Ingestion Speed vs. Validation</h3>
                    </div>
                    <div class="p-6 flex-1">
                        <div class="flex justify-between items-center mb-4 text-sm">
                            <span class="font-bold text-slate-500">Clin Ops wants:</span>
                            <span class="bg-slate-100 px-2 py-1 rounded text-slate-700">Instant Availability</span>
                        </div>
                        <div class="flex justify-between items-center mb-6 text-sm">
                            <span class="font-bold text-slate-500">Regulatory wants:</span>
                            <span class="bg-slate-100 px-2 py-1 rounded text-slate-700">Pre-load QC Checks</span>
                        </div>
                        <div class="bg-indigo-50 p-4 rounded-lg border border-indigo-100">
                            <h4 class="text-xs font-bold text-indigo-400 uppercase mb-1">Proposed Resolution</h4>
                            <p class="text-indigo-900 font-medium text-sm">Automated Airflow DAGs that run schema validation & basic QC *before* promoting data to the Silver layer.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 5: Engineering Prep Checklist -->
        <section class="bg-indigo-900 rounded-2xl shadow-xl p-8 text-white">
            <h2 class="text-2xl font-bold mb-6 flex items-center">
                <span class="mr-2">üõ†Ô∏è</span> Engineering Readiness Checklist
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Item 1 -->
                <div class="bg-indigo-800 p-4 rounded-lg border border-indigo-700 opacity-100 hover:bg-indigo-700 transition-colors">
                    <div class="flex items-center justify-between mb-2">
                        <span class="font-bold text-cyan-400">Data Volume</span>
                        <span class="text-xs bg-indigo-900 px-2 py-1 rounded">Est: 80TB</span>
                    </div>
                    <p class="text-xs text-indigo-200">New sources (Imaging, NGS) quantified?</p>
                    <div class="mt-3 h-1 w-full bg-indigo-900 rounded-full">
                        <div class="h-1 bg-green-400 rounded-full" style="width: 100%"></div>
                    </div>
                </div>

                <!-- Item 2 -->
                <div class="bg-indigo-800 p-4 rounded-lg border border-indigo-700 hover:bg-indigo-700 transition-colors">
                    <div class="flex items-center justify-between mb-2">
                        <span class="font-bold text-orange-400">Validation</span>
                        <span class="text-xs bg-indigo-900 px-2 py-1 rounded">IQ/OQ/PQ</span>
                    </div>
                    <p class="text-xs text-indigo-200">Scope of Part 11 impact defined?</p>
                    <div class="mt-3 h-1 w-full bg-indigo-900 rounded-full">
                        <div class="h-1 bg-yellow-400 rounded-full" style="width: 60%"></div>
                    </div>
                </div>

                <!-- Item 3 -->
                <div class="bg-indigo-800 p-4 rounded-lg border border-indigo-700 hover:bg-indigo-700 transition-colors">
                    <div class="flex items-center justify-between mb-2">
                        <span class="font-bold text-cyan-400">Infrastructure</span>
                        <span class="text-xs bg-indigo-900 px-2 py-1 rounded">Scaling</span>
                    </div>
                    <p class="text-xs text-indigo-200">MVP architecture review complete?</p>
                    <div class="mt-3 h-1 w-full bg-indigo-900 rounded-full">
                        <div class="h-1 bg-green-400 rounded-full" style="width: 90%"></div>
                    </div>
                </div>

                <!-- Item 4 -->
                <div class="bg-indigo-800 p-4 rounded-lg border border-indigo-700 hover:bg-indigo-700 transition-colors">
                    <div class="flex items-center justify-between mb-2">
                        <span class="font-bold text-pink-400">Integrations</span>
                        <span class="text-xs bg-indigo-900 px-2 py-1 rounded">Missing</span>
                    </div>
                    <p class="text-xs text-indigo-200">Vendor API specs available?</p>
                    <div class="mt-3 h-1 w-full bg-indigo-900 rounded-full">
                        <div class="h-1 bg-red-500 rounded-full" style="width: 20%"></div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-indigo-950 text-indigo-400 py-8 text-center text-sm">
        <p>&copy; 2026 ClinTech Informatics. Internal Planning Document.</p>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- UTILS ---
        // Label wrapping logic mandatory for Chart.js
        function wrapLabel(label, maxChars = 16) {
            if (label.length <= maxChars) return label;
            const words = label.split(' ');
            const lines = [];
            let currentLine = words[0];

            for (let i = 1; i < words.length; i++) {
                if (currentLine.length + 1 + words[i].length <= maxChars) {
                    currentLine += ' ' + words[i];
                } else {
                    lines.push(currentLine);
                    currentLine = words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        // Common Tooltip Config mandatory
        const tooltipConfig = {
            callbacks: {
                title: function(tooltipItems) {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    if (Array.isArray(label)) {
                        return label.join(' ');
                    } else {
                        return label;
                    }
                }
            }
        };

        // --- CHART 1: Priority Distribution (Doughnut) ---
        const ctxPriority = document.getElementById('priorityChart').getContext('2d');
        new Chart(ctxPriority, {
            type: 'doughnut',
            data: {
                labels: wrapLabel('P0 - Critical (Compliance/Safety)'), 
                labels: [
                    'P0 - Critical (Compliance)', 
                    'P1 - High (Efficiency)', 
                    'P2 - Medium (UX)'
                ].map(l => wrapLabel(l, 20)), // Wrap labels
                datasets: [{
                    data: [5, 3, 2], // Simulated counts based on "P0" appearing twice in worksheet
                    backgroundColor: [
                        '#ec4899', // Pink 500 (Critical)
                        '#06b6d4', // Cyan 500 (High)
                        '#a5b4fc'  // Indigo 300 (Med)
                    ],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'right' },
                    tooltip: tooltipConfig
                }
            }
        });

        // --- CHART 2: Stakeholder Volume (Horizontal Bar) ---
        const ctxStakeholder = document.getElementById('stakeholderChart').getContext('2d');
        new Chart(ctxStakeholder, {
            type: 'bar',
            data: {
                labels: ['Quality/Regulatory', 'Clinical Ops', 'Data Science'].map(l => wrapLabel(l, 16)),
                datasets: [{
                    label: 'Feature Requests',
                    data: [4, 4, 2], // Simulated volume
                    backgroundColor: [
                        '#4f46e5', // Indigo 600
                        '#06b6d4', // Cyan 500
                        '#f59e0b'  // Amber 500
                    ],
                    borderRadius: 4
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: { beginAtZero: true, grid: { display: false } },
                    y: { grid: { display: false } }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: tooltipConfig
                }
            }
        });

        // --- CHART 3: Matrix Scatter Plot ---
        const ctxMatrix = document.getElementById('matrixChart').getContext('2d');
        new Chart(ctxMatrix, {
            type: 'scatter',
            data: {
                datasets: [{
                    label: 'Features',
                    data: [
                        { x: 3, y: 9, label: 'Audit Trails (P0)' }, // High Val, Low Feas
                        { x: 8, y: 8, label: 'Vendor Ingestion (P0)' }, // High Val, High Feas
                        { x: 9, y: 6, label: 'SQL Workbench (P1)' }, // Med Val, High Feas
                        { x: 5, y: 4, label: 'Custom UI (P2)' } // Low Val, Med Feas
                    ],
                    backgroundColor: function(ctx) {
                        const val = ctx.raw;
                        if (!val) return '#999';
                        if (val.y > 7 && val.x < 5) return '#f97316'; // Orange (Big Bet)
                        if (val.y > 7 && val.x >= 5) return '#22c55e'; // Green (Quick Win)
                        return '#6366f1'; // Indigo
                    },
                    pointRadius: 12,
                    pointHoverRadius: 14
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        title: { display: true, text: 'Technical Feasibility (Easy -> Hard)' },
                        min: 0, max: 10,
                        grid: { color: '#e2e8f0' }
                    },
                    y: {
                        title: { display: true, text: 'Business Value (Low -> High)' },
                        min: 0, max: 10,
                        grid: { color: '#e2e8f0' }
                    }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.raw.label;
                            }
                        }
                    },
                    annotation: {
                        // Note: Chart.js annotation plugin not loaded, using CSS/HTML for legend instead
                    }
                }
            }
        });
    </script>
</body>
</html>
